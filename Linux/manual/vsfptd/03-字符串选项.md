# 字符串选项

以下列出了 `vsftpd.conf` 所有字符串选项。

1.  anon_root

    | 默认值 | `无`                                                               |
    | ------ | ------------------------------------------------------------------ |
    | 说明   | 此选项表示 vsftpd 在匿名登录后尝试更改的目录。失败被默默地忽略了。 |

2.  banned_email_file

    | 默认值 | `/etc/vsftpd.banned_emails`                            |
    | ------ | ------------------------------------------------------ |
    | 说明   | 此选项是包含不允许的匿名电子邮件密码列表的文件的名称。 |
    | 条件   | 启用了选项 `deny_email_enable`，则会查询此文件         |

3.  banner_file

    | 默认值 | `无`                                             |
    | ------ | ------------------------------------------------ |
    | 说明   | 客户端连接到服务器时，服务器会输出此文件的内容。 |

    > 如果选项值不为空，它将覆盖 `ftpd_banner` 选项提供的标题字符串！

4.  ca_certs_file

    | 默认值 | `无`                                                               |
    | ------ | ------------------------------------------------------------------ |
    | 说明   | 此选项是用于加载证书颁发机构证书的文件的名称，用于验证客户端证书。 |

    > 遗憾的是，由于 vsftpd 使用受限制的文件系统空间（chroot），因此未使用默认的 SSL CA 证书路径。

5.  chown_username

    | 默认值 | `root`                                         |
    | ------ | ---------------------------------------------- |
    | 说明   | 这是获得匿名上传文件所有权的用户的名称。       |
    | 条件   | 仅当 `chown_uploads=YES` 时，此选项才有意义 。 |

6.  chroot_list_file

    | 默认值 | `/etc/vsftpd.chroot_list`                           |
    | ------ | --------------------------------------------------- |
    | 说明   | 指定 1 个文件路径，该路径文件包含部分本地用户的列表 |
    | 条件   | `chroot_list_enable=YES` 是才有意义                 |

    > 具体讲解，请查看 [chroot_list_enable](./01-布尔值选项.md) 第 14 个选项！

7.  cmds_allowed

    | 默认值 | `无`                                                                        |
    | ------ | --------------------------------------------------------------------------- |
    | 说明   | 指定允许客户端使用的 FTP 命令的列表（多个命令以逗号分隔），其他命令被拒绝。 |
    | 条件   | `cmds_denied` 参数值为空才会生效                                            |

    > 这是一种真正锁定 FTP 服务器的强大方法。示例：`cmds_allowed = PASV, RETR, QUIT`

8.  cmds_denied

    | 默认值 | `无`                                                                          |
    | ------ | ----------------------------------------------------------------------------- |
    | 说明   | 指定拒绝客户端使用的 FTP 命令的列表（多个命令以逗号分隔），其他命令将被允许。 |

    > 如果此命令和 cmds_allowed 上都出现命令， 则拒绝优先。

9.  deny_file

    | 默认值 | `无`                                                                                                         |
    | ------ | ------------------------------------------------------------------------------------------------------------ |
    | 说明   | 此选项可用于设置，让某些指定的文件名（包括目录名）无法访问；                                                 |
    | 说明   | 受影响的文件不会被隐藏，但 ftp 客户端不能对这些文件做任何事情，即：下载、更改路径、修改文件等都将被拒绝；    |
    | 说明   | 此选项非常简单，不应用于严格的访问控制，建议对任何重要的安全策略使用文件系统权限。                           |
    | 说明   | 但是，此选项在某些虚拟用户设置中可能很有用。                                                                 |
    | 说明   | 特别要注意的是，如果文件名可以通过各种名称访问（可能是由于符号链接或硬链接），那么必须注意拒绝访问所有名称。 |
    | 说明   | 如果项目的名称包含 hide_file 给出的字符串，或者它们与 hide_file 指定的正则表达式匹配，则将拒绝访问项目。     |
    | 注意   | vsftp 支持的正则表达式是完整正则表达式功能的子集。因此，您需要仔细而详尽地测试此选项的任何应用程序。         |
    | 注意   | 仅在路径的最后一个组件上支持正则表达式匹配；                                                                 |
    | 注意   | 支持的正则表达式语法是任意数量的 `\*` 、`?` 和 非嵌套的`{,}`运算符；                                         |
    | 注意   | 例如：`a/b/?` 支持，但`a/?/c` 不支持。示例：`deny_file = {_.mp3,_.mov,.private}`                             |

10. dsa_cert_file

    | 默认值 | `无`( RSA 证书就足够了)                        |
    | ------ | ---------------------------------------------- |
    | 说明   | 此选项指定用于 SSL 加密连接的 DSA 证书的位置。 |

11. dsa_private_key_file

    | 默认值 | `无`( RSA 证书就足够了)                                                                          |
    | ------ | ------------------------------------------------------------------------------------------------ |
    | 说明   | 此选项指定用于 SSL 加密连接的 DSA 私钥的位置。如果未设置此选项，则预期私钥与证书位于同一文件中。 |

12. email_password_file

    | 默认值 | `/etc/vsftpd.email_passwords`                                    |
    | ------ | ---------------------------------------------------------------- |
    | 说明   | 此选项可用于提供 `secure_email_list_enable` 设置使用的备用文件。 |

13. ftp_username

    | 默认值 | `ftp`                                                                          |
    | ------ | ------------------------------------------------------------------------------ |
    | 说明   | 这是我们用于处理匿名 FTP 的用户的名称。该用户的主目录是匿名 FTP 区域的根目录。 |

14. ftpd_banner

    | 默认值 | `无` (显示默认的 vsftpd 横幅)                                      |
    | ------ | ------------------------------------------------------------------ |
    | 说明   | 此字符串选项允许您在首次进入连接时，覆盖 vsftpd 显示的问候语横幅。 |

15. guest_username

    | 默认值 | `ftp`                                                                                       |
    | ------ | ------------------------------------------------------------------------------------------- |
    | 说明   | 有关构成访客登录的说明，请参见布尔设置 `guest_enable`。此设置是访客用户映射到的真实用户名。 |

16. hide_file

    | 默认值 | `无`                                                                                                     |
    | ------ | -------------------------------------------------------------------------------------------------------- |
    | 说明   | 此选项可用于设置文件名（包括目录名）从目录列表中隐藏。                                                   |
    | 说明   | 尽管被隐藏，但是知道实际使用的名称的客户可以完全访问它们。                                               |
    | 说明   | 如果项目的名称包含 hide_file 给出的字符串，或者它们与 hide_file 指定的正则表达式匹配，则将隐藏这些项目。 |
    | 注意   | vsftp 的正则表达式匹配代码是一个简单的实现，它是完整正则表达式功能的子集。                               |
    | 注意   | 有关具体支持的正则表达式语法的详细信息，请参阅 deny*file。示例：`hide_file = {*.mp3,.hidden,hide\_,h?}`  |

17. listen_address

    | 默认值 | `无`                                                   |
    | ------ | ------------------------------------------------------ |
    | 说明   | 覆盖（所有本地接口的）默认侦听地址。提供数字 IP 地址。 |
    | 条件   | 如果 vsftpd 处于独立模式                               |

18. listen_address6

    | 默认值 | `无`                                                     |
    | ------ | -------------------------------------------------------- |
    | 说明   | 与 listen_address 类似，但指定 IPv6 侦听器的默认侦听地址 |

    > 如果设置了 listen_ipv6，则使用该地址。格式是标准 IPv6 地址格式。

19. local_root

    | 默认值 | `无`                                                                           |
    | ------ | ------------------------------------------------------------------------------ |
    | 说明   | 此选项表示 vsftpd 在本地（即非匿名）登录后尝试更改的目录。失败被默默地忽略了。 |

20. message_file

    | 默认值 | `.message`                                                     |
    | ------ | -------------------------------------------------------------- |
    | 说明   | 此选项是输入新目录时我们查找的文件的名称。内容显示给远程用户。 |
    | 条件   | 仅当启用了选项 `dirmessage_enable` 时，此选项才有意义 。       |

21. nopriv_user

    | 默认值 | `nobody`                                                                           |
    | ------ | ---------------------------------------------------------------------------------- |
    | 说明   | 这是 vsftpd 在完全没有特权的情况下使用的用户名。                                   |
    | 注意   | 这应该是专用用户，而不是任何人。在大多数机器上，用户没有倾向于使用很多重要的东西。 |

22. pam_service_name

    | 默认值 | `ftp`                                       |
    | ------ | ------------------------------------------- |
    | 说明   | 此字符串是 vsftpd 将使用的 PAM 服务的名称。 |

23. pasv_address

    | 默认值 | `无` （地址从传入的连接套接字获取）                                                         |
    | ------ | ------------------------------------------------------------------------------------------- |
    | 说明   | 使用此选项可以覆盖 vsftpd 将响应 PASV（被动模式）命令而通告的 IP 地址（提供数字 IP 地址）。 |
    | 条件   | 除非启用了 `pasv_addr_resolve`                                                              |

    > 在这种情况下，您可以提供一个主机名，该主机名将在启动时为您解析 DNS。

24. rsa_cert_file

    | 默认值 | `/usr/share/ssl/certs/vsftpd.pem`              |
    | ------ | ---------------------------------------------- |
    | 说明   | 此选项指定用于 SSL 加密连接的 RSA 证书的位置。 |

25. rsa_private_key_file

    | 默认值 | `无`                                         |
    | ------ | -------------------------------------------- |
    | 说明   | 此选项指定用于 SSL 加密连接的 RSA 私钥的位置 |

    > 如果未设置此选项，则预期私钥与证书位于同一文件中。

26. secure_chroot_dir

    | 默认值 | `/usr/share/empty`       |
    | ------ | ------------------------ |
    | 说明   | 此选项应该是空目录的名称 |

    > 此外，ftp 用户不应该写入该目录。此目录有时用作安全 chroot() 监狱，vsftpd 不需要文件系统访问。

27. 的 ssl_ciphers

    | 默认值 | `DES-CBC3-SHA`                                             |
    | ------ | ---------------------------------------------------------- |
    | 说明   | 此选项可用于选择哪些 SSL 密码 vsftpd 将允许加密的 SSL 连接 |

    > 更多详细信息，请参见密码手册页。请注意，限制密码可能是有用的安全预防措施，因为它可以防止恶意远程方强制使用他们发现问题的密码。

28. user_config_dir

    | 默认值 | `无`                                                                          |
    | ------ | ----------------------------------------------------------------------------- |
    | 说明   | 这个选项允许按用户对手册页中指定的任何配置选项进行覆盖（功能强大）。          |
    | 案例 1 | 如果将 `user_config_dir` 设置为 `/etc/vsftpd_user_conf`，                     |
    | 案例 1 | 然后以 `chris` 用户身份登录，                                                 |
    | 案例 1 | 则 vsftpd 将在会话期间应用文件 `/etc/vsftpd_user_conf/chris` 中的设置。       |
    | 说明   | 该文件的格式在本手册页中有详细说明！请注意，并非所有设置对每个用户都有效。    |
    | 案例 2 | 许多设置仅在启动用户会话之前。 不会影响每个用户行为的设置示例包括：           |
    | 案例 2 | `listen_address`，`banner_file`，`max_per_ip，max_clients`，`xferlog_file` 等 |

29. user_sub_token

    | 默认值 | `无`                                                                                     |
    | ------ | ---------------------------------------------------------------------------------------- |
    | 说明   | 与虚拟用户一起使用时，此选项很有用。它用于基于模板为每个虚拟用户自动生成主目录。         |
    | 例如   | 如果通过 `guest_username` 指定的真实用户的主目录是 `/home/virtual/$USER`，               |
    | 例如   | 并且 `user_sub_token` 设置为 `$USER`，                                                   |
    | 例如   | 那么当虚拟用户 `fred` 登录时，他将结束（通常是`chroot()`）在`/home/virtual/fred`目录中。 |
    | 例如   | 如果 `local_root` 包含 `user_sub_token`，则此选项也会生效。                              |

30. userlist_file

    | 默认值 | `/etc/vsftpd.user_list`                             |
    | ------ | --------------------------------------------------- |
    | 说明   | 此选项是 `userlist_enable=YES` 时加载的文件的名称。 |

31. vsftpd_log_file

    | 默认值 | `/var/log/vsftpd.log`                                                     |
    | ------ | ------------------------------------------------------------------------- |
    | 说明   | 此选项是我们编写 vsftpd 样式日志文件的文件的名称。                        |
    | 条件 1 | 仅当 `xferlog_enable=YES` 并且 `xferlog_std_format=NO` 时，允许写入此日志 |
    | 条件 2 | 如果已设置 `dual_log_enable=YES`，也会允许写入                            |

    > 如果已设置 `syslog_enable=YES`，则不会写入此文件，而是将输出发送到系统日志。

32. xferlog_file

    | 默认值 | `/var/log/xferlog`                                                                   |
    | ------ | ------------------------------------------------------------------------------------ |
    | 说明   | 此选项是我们编写 wu-ftpd 样式传输日志的文件的名称。                                  |
    | 条件   | 仅当设置了 `xferlog_enable=YES` 选项以及 `xferlog_std_format=YES` 时才会写入传输日志 |
    | 条件   | 或者，如果已设置选项 `dual_log_enable=YES`，则会写入 。                              |
